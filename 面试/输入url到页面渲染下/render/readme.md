# 浏览器拿到了资源
1. 解析html代码,生成一个DOM树

2. 解析css,CSSOM树(css优化少写优化少写嵌套,不过微乎其微)

3. 将DOM树和CSSOM树结合,去除不可见的元素,生成Render Tree

4. 计算布局(回流|重排),根据Render Tree 进行布局的计算,得到每一个节点的几何信息

5. 绘制页面(重绘3),GPU根据布局信息绘制


# 什么叫做回流
- 浏览器计算页面布局的过程叫做回流(文档流)

- 当一个容器的几何属性发生变更时(因为会影响其它元素的位置),页面会发生回流
常见变更
1. 改变窗口的尺寸
2. 改变元素的大小
3. 增加或者删除可见元素
4. 页面初次渲染


# 什么是重绘(回流的开销更大)
 - 将已经计算好布局的容器在屏幕上展示出来
 - 元素的非几何属性变化时,会发生重绘
常见发生重绘的情景:
1. 修改背景颜色
2. 修改背景图片
3. 边框颜色
4. 字体颜色

 - 发生重绘不一定发生回流,发生回流,一定会重绘




# 浏览器的优化策略

当代浏览器都有一个渲染队列机制,当一个元素的样式变更导致需要回流的时候,这个操作会进入渲染队列,然后浏览器继续往下执行代码,如果还有相同行为,继续进入队列,直到下面没有样式修改,浏览器会批量化执行渲染队列中的回流过程,这只发生一次回流

offsetWidth,offsetHeight,offsetTop,offsetLeft,
scrollWidth,scrollHeight,scrollTop,scrollLeft,
clientWidth,clientHeight,clientTop,clientLeft

以上这些方法属性都会导致浏览器渲染队列强制执行

# 如何减少回流重绘
1. 合理利用浏览器的优化策略
2. 先将样式修改display:none,再修改样式,再block回来(防止渲染队列中放不下)




获取window的宽度innerwidth
